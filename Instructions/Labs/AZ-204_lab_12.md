---
lab:
    az204Title: '实验室 12：使用 Azure 内容分发网络增强 Web 应用程序'
    az204Module: '模块 12：在解决方案中集成缓存和内容交付'
---

# 实验室 12：使用 Azure 内容分发网络增强 Web 应用程序

## Microsoft Azure 用户界面

鉴于 Microsoft 云工具的动态特性，Azure UI 在此培训内容开发后可能会发生更改。这些更改可能会导致实验室说明和实验室步骤不匹配。

当社区要求我们进行更改时，Microsoft 将更新此培训课程。但是，由于云更新频繁发生，因此在此培训内容更新之前，你可能会遇到 UI 更改情况。**如果发生这种情况，请适应这些更改，并根据需要在实验室中熟悉这些更改。**

## 说明

### 准备工作

#### 登录到实验室虚拟机

使用以下凭据登录到 Windows 10 虚拟机 (VM)：
    
-   用户名：**Admin**

-   密码： **Pa55w.rd**

> **备注**： 你的讲师将提供连接到虚拟实验室环境的说明。

#### 查看已安装的应用程序

在你的 Windows 10 桌面上找到任务栏。任务栏包含了你在本实验室中会使用的应用程序图标：
    
-   Microsoft Edge

### 练习 1：创建 Azure 资源

#### 任务 1：打开 Azure 门户

1.  在任务栏上，选择 **“Microsoft Edge”图标**。

1.  在打开的浏览器窗口中，转到 Azure 门户 (<https://portal.azure.com>)。

1.  输入你的 Microsoft 帐户的电子邮件地址，然后选择 **“下一步”**。

1.  输入 Microsoft 帐户的密码，然后选择 **“登录”**。

    > **备注**： 第一次登录 Azure 门户时，你会看到一个门户教程。选择 **“开始使用”**，以跳过导览并开始使用门户。


#### 任务 2：创建存储帐户

1.  在 Azure 门户的“导航”窗格中，选择 **“所有服务”**。

1.  在 **“所有服务”** 边栏选项卡中，选择 **“存储帐户”**。

1.  在 **“存储帐户”** 边栏选项卡上，查找 Storage 实例列表。

1.  在 **“存储帐户”** 边栏选项卡中，选择 **“创建”**。

1.  从 **“创建存储帐户”** 边栏选项卡中找到各选项卡，例如 **“基本”**。

    > **备注**： 每个选项卡代表工作流中创建新存储帐户的一个步骤。你可以随时选择 **“查看 + 创建”** 跳过其余选项卡。

1.  在 **“基本”** 选项卡上，执行以下操作：
    
    1.  将 **“订阅”** 文本框保留设置为默认值。

    1.  在 **“资源组”** 部分，选择 **“新建”**，输入 **“MonitoredAssets”**，然后选择 **“确定”**。

    1.  在 **“存储帐户名称”** 文本框中，输入**contenthost*[yourname]***。

    1.  在 **“位置”** 下拉列表中，选择 **“(美国)美国东部”** 区域。

    1.  在 **“性能”** 部分，选择 **“标准”**。

    1.  在 **“冗余”** 下拉列表中，选择 **“本地冗余存储(LRS)”**。

    1.  选择 **“查看 + 创建”**。

1.  在 **“查看 + 创建”** 选项卡中，查看在上述步骤中选择的选项。

1.  选择 **“创建”**，使用指定的配置创建存储帐户。 

    > **备注**：等待创建任务完成，再继续本实验室。
    
#### 任务 3：通过使用 Azure 应用服务创建 Web 应用

1.  在 Azure 门户的导航窗格上，选择 **“创建资源”**。

1.  在 **“创建资源”** 边栏选项卡上，找到 **“搜索服务和市场”** 文本框。

1.  在搜索框中，输入 **“Web 应用”**，然后按 Enter。

1.  在 **“全部内容”** 搜索结果边栏选项卡中，选择 **“Web 应用”** 结果。

1.  在 **“Web 应用”** 边栏选项卡中，选择 **“创建”**。

1.  在 **“创建 Web 应用”** 边栏选项卡上查找各选项卡，例如 **“基本”**。

    > **备注**： 每个选项卡都代表在工作流中新建 Web 应用的一个步骤。你可以随时选择 **“查看 + 创建”** 跳过其余选项卡。

1.  在 **“基本”** 选项卡上，执行以下操作：
    
    1.  将 **“订阅”** 文本框保留设置为默认值。
    
    1.  在 **“资源组”** 部分，选择 **“MarketingContent”**。

    1.  在 **“名称”** 文本框中，输入 **landingpage*[yourname]***。

    1.  在 **“发布”** 部分，选择 **“Docker 容器”**。

    1.  在 **“操作系统”** 部分，选择 **“Linux”**。

    1.  在 **“区域”** 下拉列表中，选择 **“美国东部”** 区域。

    1.  在 **“Linux 计划（美国东部）”** 部分中，选择 **“新建”**，然后将值 **“MarketingPlan”** 输入 **“名称”** 文本框，然后选择 **“确定”**。

    1.  将 **“SKU 和大小”** 部分保留设置为默认值。

    1.  选择“下一步: **Docker**”。

1.  在 **“Docker”** 选项卡上，执行以下操作：

    1.  在 **“选项”** 下拉列表中，选择 **“单个容器”**。

    1.  在 **“映像源”** 下拉列表中，选择 **“Docker 中心”**。

    1.  在 **“访问类型”** 下拉列表中，选择 **“公共”**。

    1.  在 **“映像和标记”** 文本框中，输入 **microsoftlearning/edx-html-landing-page:latest**。

    1.  选择 **“查看 + 创建”**。

1.  在 **“查看 + 创建”** 选项卡中，查看在上述步骤中选择的选项。

1.  选择 **“创建”**，使用指定的配置创建 Web 应用。 

    > **备注**： 等待创建任务完成，再继续本实验室。

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **landingpage*[yourname]*** Web 应用。

1.  在 **“应用服务”** 边栏选项卡的 **“设置”** 部分，选择 **“属性”** 链接。

1.  在 **“属性”** 部分，记录 **“URL”** 文本框的值。你将在稍后的实验室中使用此值。

#### 回顾

在本练习中，你创建了一个 Azure 存储帐户和一个 Azure Web 应用，你稍后将在本实验使用。

### 练习 2：配置内容分发网络和端点

#### 任务 1：打开 Azure Cloud Shell

1.  在 Azure 门户中，选择 **“Cloud Shell”** 图标以打开一个新的 shell 实例。

    > **备注**： **Cloud Shell** 图标使用大于符号 (\>) 和下划线字符 (\_) 表示。

1.  如果这是你第一次使用订阅打开 Cloud Shell，则可以使用 **“欢迎使用 Azure Cloud Shell 向导”** 来配置 Cloud Shell，以便首次使用。在向导中执行以下操作：
    
    -   对话框提示你配置 shell。选择 **“Bash”**，查看选定的订阅，然后选择 **“创建存储”**。 

    > **备注**： 等待 **Cloud Shell** 完成首次设置过程后，再继续本实验室。如果 Cloud Shell 配置选项未显示，很可能是因为你使用的是本课程实验室中的现有订阅。实验是假设你使用的是新订阅的情况下编写的。

1.  在门户中的 **Cloud Shell** 命令提示符处，输入以下命令，然后选择“Enter”以获取 Azure 命令行接口 (Azure CLI) 工具的版本：

    ```
    az --version
    ```

#### 任务 2：注册 Microsoft.CDN 提供程序

1.  在门户中的 **“Cloud Shell”** 命令提示符处，执行以下操作：

    1.  输入以下命令并选择“Enter”以获取 Azure CLI 根级别的子组和命令列表：

        ```
        az --help
        ```

    1.  输入以下命令，然后选择“Enter”以获取资源提供程序可用的命令列表：

        ```
        az provider --help
        ```

    1.  输入以下命令，然后按“Enter”键以列出所有当前注册的提供程序：

        ```
        az provider list
        ```

    1.  输入以下命令，然后按“Enter”键以仅列出当前注册的提供程序的命名空间：

        ```
        az provider list --query "[].namespace"
        ```

    1.  观察当前注册的提供程序列表。 **Microsoft.CDN** 提供商当前未在提供商列表中。

    1.  输入以下命令，然后按 Enter 以获取注册新提供商所需的标记：

        ```
        az provider register --help
        ```

    1.  输入以下命令，然后按 Enter（使用当前订阅）注册 **Microsoft.CDN** 命名空间：

        ```
        az provider register --namespace Microsoft.CDN
        ```

1.  关闭门户中的 Cloud Shell 窗格。

#### 任务 3：创建内容分发网络配置文件

1.  在 Azure 门户的导航窗格上，选择 **“创建资源”**。

1.  在 **“创建资源”** 边栏选项卡上，找到 **“搜索服务和市场”** 文本框。

1.  在搜索文本框中，输入 **CDN** 然后按 Enter。

1.  在 **“市场”** 搜索结果边栏选项卡中，选择 **“CDN”** 结果。

1.  在 **“CDN”** 边栏选项卡中，选择 **“创建”**。

1.  查找 **“CDN 配置文件”** 边栏选项卡的选项卡，例如 **“基本”**。

    > **备注**： 每个选项卡都代表在工作流中新建 CDN 配置文件的一个步骤。你可以随时选择 **“查看 + 创建”** 跳过其余选项卡。

1.  在 **“基本”** 选项卡上，执行以下操作：
    
    1.  将 **“订阅”** 文本框保留设置为默认值。

    1.  在 **“资源组”** 部分，选择 **“MarketingContent”**。

    1.  在 **“名称”** 文本框中，输入 **contentdeliverynetwork**。
    
    1.  将 **“区域”** 下拉列表设置为默认值(“全局”)。

    1.  在 **“定价层”** 下拉列表中，选择 **“标准 Microsoft”**。

    1.  确保已清除 **“立即创建新的 CDN 终结点”** 复选框。

    1.  选择 **“查看 + 创建”**。

1.  在 **“查看 + 创建”** 选项卡中，查看在上述步骤中选择的选项。

1.  选择 **“创建”** 以使用指定的配置创建 CDN 配置文件。 
  
    > **备注**： 等待 Azure 完成 CDN 配置文件创建后，再继续本实验室。你将会在应用创建完毕后收到通知。

#### 任务 4：配置储存容器

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **contenthost*[yourname]*** 存储帐户。

1.  在 **“存储帐户”** 边栏选项卡中，选择 **“数据存储”** 部分的 **“容器”** 链接。

1.  在 **“容器”** 部分，选择 **“+ 容器”**。

1.  在 **“新建容器”** 弹出窗口中，执行以下操作：
    
    1.  在 **“名称”** 文本框中，输入 **“media”**。
    
    1.  在 **“公共访问级别”** 下拉列表中，选择 **“Blob (仅限对 Blob 的匿名读取访问权限)”**。 
    
    1.  选择 **“创建”**。

1.  返回 **“容器”** 部分，再次选择 **“+ 容器”**。

1.  在 **“新建容器”** 弹出窗口中，执行以下操作：
    
    1.  在 **“名称”** 文本框中，输入 **“video”**。
    
    1.  在 **“公共访问级别”** 下拉列表中，选择 **“Blob (仅限对 Blob 的匿名读取访问权限)”**。 
    
    1.  选择 **“创建”**。

1.  查看更新后的容器列表。

#### 任务 5：创建内容分发网络终结点

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”** 链接。

1.  在 **“资源组”** 边栏选项卡中，找到并选择你在本实验前面部分创建的 **“MarketingContent”** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **“contentdeliverynetwork”** CDN 配置文件。

1.  在 **“CDN 配置文件”** 边栏选项卡中，选择 **“+ 终结点”**。

1.  在 **“添加终结点”** 弹出对话框中，执行以下操作：

    1.  在 **“名称”** 文本框中，输入 **cdnmedia*[yourname]***。

    1.  在 **“源类型”** 下拉列表中，选择 **“存储”**。

    1.  在 **“源主机名”** 下拉列表中，选择你之前在本实验室中为存储帐户创建的 **contenthost*[yourname]*.Blob.core.windows.net** 选项。

    1.  在 **“源路径”** 文本框中，输入 **“/media”**。

    1.  将 **“源主机标题”** 文本框保留设置为默认值。

    1.  将 **“协议”** 和 **“源端口”** 部分保留设置为默认值。

    1.  在 **“优化对象”** 下拉列表中，选择 **“常规 Web 传送”**。

    1.  选择 **“添加”**。

1.  回到 **“CDN 配置文件”** 边栏选项卡，再次选择 **“+ 终结点”**。

1.  在 **“添加终结点”** 弹出对话框中，执行以下操作：

    1.  在 **“名称”** 文本框中，输入 **cdnvideo*[yourname]***。

    1.  在 **“源类型”** 下拉列表中，选择 **“存储”**。

    1.  在 **“源主机名”** 下拉列表中，选择你之前在本实验室中为存储帐户创建的 **contenthost*[yourname]*.Blob.core.windows.net** 选项。

    1.  在 **“源路径”** 文本框中，输入 **“/video”**。

    1.  将 **“源主机标题”** 文本框保留设置为默认值。

    1.  将 **“协议”** 和 **“源端口”** 部分保留设置为默认值。

    1.  在 **“优化对象”** 下拉列表中，选择 **“点播视频媒体流”**。

    1.  选择 **“添加”**。

1.  回到 **“CDN 配置文件”** 边栏选项卡，再次选择 **“+ 终结点”**。

1.  在 **“添加终结点”** 弹出对话框中，执行以下操作：

    1.  在 **“名称”** 文本框中，输入**cdnweb*[yourname]***。

    1.  在 **“源类型”** 下拉列表中，选择 **“Web 应用”**。

    1.  在 **“源主机名”** 下拉列表中，为你之前在本实验室中创建的 Web 应用选择 **landingpage*[yourname]*.azurewebsites.net** 选项。

    1.  将 **“源路径”** 文本框设置为其默认值。

    1.  将 **“源主机标题”** 文本框保留设置为默认值。

    1.  将 **“协议”** 和 **“源端口”** 部分保留设置为默认值。

    1.  在 **“优化对象”** 下拉列表中，选择 **“常规 Web 传送”**。

    1.  选择 **“添加”**。

#### 回顾

在本练习中，你注册了内容分发网络的资源提供程序，然后使用该提供程序创建 CDN 配置文件和终结点资源。

### 练习 3：上传和配置静态 Web 内容

#### 任务 1：查看登录页面

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **landingpage*[yourname]*** Web 应用。

1.  在 **“应用服务”** 边栏选项卡中，选择 **“浏览”**。将打开一个新的浏览器窗口或标签页，并返回到当前网站。

1.  查看屏幕上显示的错误消息。必须配置指定的设置以引用多媒体内容，否则该网站将无法正常工作。

1.  返回显示 Azure 门户的当前打开的浏览器窗口。

#### 任务 2：上传存储 Blob

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **contenthost*[yourname]*** 存储帐户。

1.  在 **“存储帐户”** 边栏选项卡中，选择 **“数据存储”** 部分的 **“容器”** 链接。

1.  在 **“容器”** 部分，选择 **“media”** 容器。

1.  在 **“容器”** 边栏选项卡中，选择 **“上传”**。

1.  在 **“上传 Blob”** 弹出窗口中，执行以下操作：
    
    1.  在 **“文件”** 部分，选择 **“文件夹”** 图标。
    
    1.  在 **“文件资源管理器”** 窗口中，浏览到 **“Allfiles (F):\\Allfiles\\Labs\\12\\Starter”**，选择以下文件，然后选择 **“打开”**：

        -   **campus.jpg**
        
        -   **conference.jpg**
        
        -   **poster.jpg**
    
    1.  确保 **“如果文件已存在，则覆盖”** 已选中，然后选择 **“上传”**。  

    > **备注**： 等待 Blob 上传完成，然后再继续本实验室。

1.  返回到 **“容器”** 边栏选项卡，在 **“设置”** 部分中选择 **“属性”**。

1.  记录 **“URL”** 文本框中的值。你稍后将在实验室中使用此值。

1.  关闭 **“容器”** 边栏选项卡。

1.  返回 **“容器”** 边栏选项卡，选择 **“video”** 容器。

1.  在 **“容器”** 边栏选项卡中，选择 **“上传”**。

1.  在 **“上传 Blob”** 弹出窗口中，执行以下操作：
    
    1.  在 **“文件”** 部分，选择 **“文件夹”** 图标。
    
    1.  在 **“文件资源管理器”** 窗口中，浏览至 **“Allfiles (F):\\Allfiles\\Labs\\12\\Starter”**，选择 **“welcome.mp4”** 文件，然后选择 **“打开”**。
    
    1.  确保 **“如果文件已存在，则覆盖”** 已选中，然后选择 **“上传”**。  

    > **备注**： 等待 Blob 上传完成，然后再继续本实验室。

1.  返回到 **“容器”** 边栏选项卡，在 **“设置”** 部分中选择 **“属性”**。

1.  记录 **“URL”** 文本框中的值。你稍后将在实验室中使用此值。

#### 任务 3：配置 Web 应用设置

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **landingpage*[yourname]*** Web 应用。

1.  在 **“应用服务”** 边栏选项卡的 **“设置”** 部分，选择 **“配置”** 链接。

1.  在 **“配置”** 部分，执行以下操作：
    
    1.  选择 **“应用程序设置”** 选项卡，然后选择 **“新应用程序设置”**。
    
    1.  在 **“添加/编辑应用程序设置”** 弹出窗口中的 **“名称”** 文本框，输入 **“CDNMediaEndpoint”**。
    
    1.  在 **“值”** 文本框中，输入你之前在本实验记录的 **contenthost*[yourname]*** 存储帐户中的 **“media”** 容器的 **“URI”** 值。
    
    1.  将 **“部署插槽设置”** 文本框设置为默认值，然后选择 **“确定”** 以关闭弹出窗口。
    
    1.  返回到 **“配置”** 部分，然后选择 **“新的应用程序设置”**。
    
    1.  在 **“添加/编辑应用程序设置”** 弹出窗口的 **“名称”** 文本框中，输入 **“CDNVideoEndpoint”**。
    
    1.  在 **“值”** 文本框中，输入你之前在本实验室记录的 **contenthost*[yourname]*** 存储帐户中 **“视频”** 容器的 **“URI”** 值。
    
    1.  将 **“部署插槽设置”** 文本框设置为默认值，然后选择 **“确定”** 以关闭弹出窗口。
    
    1.  返回到 **“配置”** 部分，然后在边栏选项卡上选择 **“保存”** 以保留设置。  

    > **备注**： 等待应用程序设置保存后再继续本实验室。

#### 任务 4：验证更正的登录页面

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **landingpage*[yourname]*** Web 应用。

1.  在 **“应用服务”** 边栏选项卡中，选择 **“重启”**。此操作将重新启动 Web 应用。

    > **备注**： 等待重启操作完成后再继续本实验室。执行此操作时你会收到一条通知。

1.  返回 **“应用服务”** 边栏选项卡，选择 **“浏览”**。将打开一个新的浏览器窗口或标签页，并返回到当前网站。

1.  查看更新后的网站，其呈现出各种类型的多媒体内容。

1.  返回显示 Azure 门户的当前打开的浏览器窗口。

#### 回顾

在本练习中，将多媒体内容作为 Blob 上传到存储容器，然后更新你的 Web 应用以直接指向存储 Blob。

### 练习 4：使用内容分发网络终结点

#### 任务 1：检索终结点 URI

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”** 链接。

1.  在 **“资源组”** 边栏选项卡中，找到并选择你在本实验前面部分创建的 **“MarketingContent”** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **“contentdeliverynetwork”** CDN 配置文件。

1.  在 **“CDN 配置文件”** 边栏选项卡上，选择 **cdnmedia*[yourname]*** 终结点。

1.  在 **“终结点”** 边栏选项卡上，复制 **“终结点主机名”** 文本框的值。你稍后将在实验室中使用此值。

1.  关闭 **“终结点”** 边栏选项卡。

1.  返回到 **“CDN 配置文件”** 边栏选项卡，选择 **cdnvideo*[yourname]*** 终结点。

1.  在 **“终结点”** 边栏选项卡上，复制 **“终结点主机名”** 文本框的值。你稍后将在实验室中使用此值。

1.  关闭 **“终结点”** 边栏选项卡。

#### 任务 2：测试多媒体内容

1.  通过将之前在实验室中复制的 **“cdnmedia[yourname]”** 终结点的 **“终结点主机名”** URL 与相对路径 **“/campus.jpg”** 合并，为 **“campus.jpg”** 资源构建 URL。

    > **备注**： 例如，如果你的 **“终结点主机名”** URL 是 **https://cdnmediastudent.azureedge.net/** 则新建的 URL 将是 **https://cdnmediastudent.azureedge.net/campus.jpg**

1.  通过将之前在实验室中复制的 **cdnmedia*[yourname]*** 终结点的 **“终结点主机名”** URL 与相对路径 **/conference.jpg** 合并，为 **conference.jpg** 资源构建 URL。

    > **备注**： 例如，如果你的**终结点主机名** URL 为 **https://cdnmediastudent.azureedge.net/** 则新建的 URL 为 **https://cdnmediastudent.azureedge.net/conference.jpg**

1.  通过将之前在实验室中复制的 **cdnmedia*[yourname]*** 终结点的**终结点主机名** URL 与相对路径 **/poster.jpg** 合并，为 **poster.jpg** 资源构建 URL。

    > **备注**： 例如，如果你的**终结点主机名** URL 为 **https://cdnmediastudent.azureedge.net/** 则新建的 URL 为 **https://cdnmediastudent.azureedge.net/poster.jpg**

1.  通过将你之前在实验室中复制的 **cdnvideo*[yourname]*** 终结点的**终结点主机名** URL 与相对路径 **/welcome.mp4** 合并，为 **Welcome.mp4** 资源构建 URL。

    > **备注**： 例如，如果你的**终结点主机名** URL 为 **https://cdnvideostudent.azureedge.net/** 则新构建的 URL 为 **https://cdnvideostudent.azureedge.net/welcome.mp4**

1.  在任务栏上，右键单击 **“Microsoft Edge”** 图标或激活快捷菜单，然后选择 **“新建窗口”**。

1.  在新的浏览器窗口中，转到你为 **campus.jpg** 媒体资源构建的 URL，然后验证是否已成功找到该资源。

    > **备注**： 如果内容尚不可用，则表示 CDN 终结点仍在初始化。初始化过程可能需要 5 到 15 分钟。

1.  转到你为 **conference.jpg** 媒体资源构建的 URL，然后验证是否已成功找到该资源。

1.  转至你为 **poster.jpg** 媒体资源构建的 URL，然后验证是否已成功找到该资源。

1.  前往为 **welcome.mp4** 视频资源构建的 URL，然后验证是否已成功找到该资源。

1.  关闭在此任务中创建的浏览器窗口。

#### 任务 3：更新 Web 应用设置

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”**。

1.  在 **“资源组”** 边栏选项卡中，选择之前在本实验室中创建的 **MarketingContent** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **landingpage*[yourname]*** Web 应用。

1.  在 **“应用服务”** 边栏选项卡的 **“设置”** 部分，选择 **“配置”** 链接。

1.  在 **“配置”** 部分，执行以下操作：
    
    1.  选择 **“应用程序设置”** 选项卡。
    
    1.  选择现有的 **“CDNMediaEndpoint”** 应用程序设置。

    1.  在 **“添加/编辑应用程序设置”** 弹出对话框中，通过从之前在实验室中复制的 **cdnmedia[yourname]** 终结点输入 **“终结点主机名”** URL 来更新 **“值”** 文本框，然后选择 **“确定”**。
    
    1.  选择现有的 **CDNVideoEndpoint** 应用程序设置。

    1.  在 **“添加/编辑应用程序设置”** 弹出对话框中，通过从你之前在实验室中复制的 **cdnmedia[yourname]** 终结点输入 **“终结点主机名”** URL 来更新 **“值”** 文本框，然后选择 **“确定”**。
    
    1.  选择边栏选项卡上的 **“保存”** 以保留设置。  

    > **备注**：等待应用程序设置保存后再继续本实验室。

1.  回到 **“配置”** 部分，选择 **“概述”**。

1.  在 **“概述”** 部分，选择 **“重启”**。此操作将重新启动 Web 应用。

    > **备注**：等待重启操作完成后再继续本实验室。执行此操作时你会收到一条通知。

#### 任务 4：测试网页内容

1.  在 Azure 门户的“导航”窗格中，选择 **“资源组”** 链接。

1.  在 **“资源组”** 边栏选项卡中，找到并选择你在本实验前面部分创建的 **“MarketingContent”** 资源组。

1.  在 **“MarketingContent”** 边栏选项卡中，选择你之前在本实验室中创建的 **“contentdeliverynetwork”** CDN 配置文件。

1.  在 **“CDN 配置文件”** 边栏选项卡上，选择 **“cdnweb*[yourname]”*** 终结点。

1.  在 **“终结点”** 边栏选项卡上，复制 **“终结点主机名”** 文本框的值。

1.  在任务栏上，右键单击 **“Microsoft Edge”** 图标或激活快捷菜单，然后选择 **“新建窗口”**。

1.  在新浏览器窗口中，转到 **cdnweb*[yourname]*** 终结点的**终结点主机名** URL。

1.  参考所有使用内容分发网络提供的网站和多媒体内容。

#### 回顾

在本练习中，你更新了 Web 应用，以使用内容分发网络提供多媒体内容并为 Web 应用程序本身提供服务。

### 练习 5：清理订阅 

#### 任务 1：打开 Azure Cloud Shell 并列出资源组

1.  在 Azure 门户的“导航”窗格中，选择 **“Cloud Shell”** 图标以打开一个新的 shell 实例。

    > **备注**： **Cloud Shell** 图标使用大于符号 (\>) 和下划线字符 (\_) 表示。

1.  如果这是你第一次使用订阅打开 Cloud Shell，则可以使用 **“欢迎使用 Azure Cloud Shell 向导”** 来配置 Cloud Shell，以便首次使用。在向导中执行以下操作：
    
    1.  对话框提示你配置 shell。选择 **“Bash”**，查看选定的订阅，然后选择 **“创建存储”**。 

    > **备注**：等待 Cloud Shell 完成首次设置过程后，再继续本实验室。如果 Cloud Shell 配置选项未显示，这很可能是因为你在本课程实验室中使用的是现有订阅。实验是假设你使用的是新订阅的情况下编写的。

#### 任务 2：删除资源组

1.  输入以下命令，然后按“Enter”删除 **“MarketingContent”** 资源组：

    ```
    az group delete --name MarketingContent --no-wait --yes
    ```
    
1.  关闭门户中的 Cloud Shell 窗格。

#### 任务 3：关闭活动的应用程序

1.     当前正在运行的 Microsoft Edge 应用程序。

#### 回顾

在本练习中，你通过删除本实验室中曾经使用的资源组来清理订阅。
